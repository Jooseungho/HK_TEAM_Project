<!-- ì‹ ê·œ í™˜ì ë“±ë¡ í¼ (SPA) -->

<div style="max-width:500px; margin:0 auto;">

    <h2 style="margin-bottom:20px;">ğŸ§¾ ì‹ ê·œ í™˜ì ë“±ë¡</h2>

    <form id="patientForm">

        <div class="form-group" style="margin-bottom:15px;">
            <label>ì´ë¦„</label>
            <input type="text" id="name" required
                   style="width:100%; height:40px; padding:8px; border:1px solid #ccc; border-radius:6px;">
        </div>

        <div class="form-group" style="margin-bottom:15px;">
            <label>ìƒë…„ì›”ì¼</label>
            <input type="date" id="birthdate" required
                   style="width:100%; height:40px; padding:8px; border:1px solid #ccc; border-radius:6px;">
        </div>

        <div class="form-group" style="margin-bottom:15px;">
            <label>ì„±ë³„</label>
            <select id="gender" required
                    style="width:100%; height:40px; padding:8px; border:1px solid #ccc; border-radius:6px;">
                <option value="">ì„ íƒ</option>
                <option value="M">ë‚¨</option>
                <option value="F">ì—¬</option>
            </select>
        </div>

        <div class="form-group" style="margin-bottom:15px;">
            <label>ì „í™”ë²ˆí˜¸</label>
            <input type="text" id="phone" placeholder="010-0000-0000"
                   style="width:100%; height:40px; padding:8px; border:1px solid #ccc; border-radius:6px;">
        </div>

        <div class="form-group" style="margin-bottom:20px;">
            <label>ì£¼ì†Œ</label>
            <input type="text" id="address"
                   style="width:100%; height:40px; padding:8px; border:1px solid #ccc; border-radius:6px;">
        </div>

        <button type="submit"
                style="width:100%; height:45px; font-size:16px;
                       background:#22c55e; border:none; color:white;
                       border-radius:8px; cursor:pointer;">
            ë“±ë¡í•˜ê¸°
        </button>

        <p id="result-msg" style="margin-top:15px; font-weight:600; color:#15803d;"></p>
    </form>

    <button onclick="loadTabContent('patient_register')"
            style="margin-top:20px; width:100%; height:40px;
                   background:#e5e7eb; border:none; border-radius:8px;
                   cursor:pointer;">
        â† í™˜ì ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
    </button>
</div>

<script>
document.getElementById("patientForm").addEventListener("submit", async function(e) {
    e.preventDefault();

    const data = {
        name: document.getElementById("name").value,
        birthdate: document.getElementById("birthdate").value,
        gender: document.getElementById("gender").value,
        phone: document.getElementById("phone").value,
        address: document.getElementById("address").value
    };

    const res = await fetch("/api/patient/register", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(data)
    });

    if (res.ok) {
        document.getElementById("result-msg").innerText = "ë“±ë¡ ì™„ë£Œ!";
        setTimeout(() => loadTabContent("patient_register"), 1000);
    } else {
        document.getElementById("result-msg").innerText = "ë“±ë¡ ì‹¤íŒ¨! ì…ë ¥ê°’ì„ í™•ì¸í•´ì£¼ì„¸ìš”.";
    }
});
</script>
